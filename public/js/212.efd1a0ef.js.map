{"version":3,"file":"js/212.efd1a0ef.js","mappings":"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","sources":["webpack://Moois/./src/views/register.vue","webpack://Moois/./src/views/register.vue?1298"],"sourcesContent":["<template>\r\n    <div class=\"login-page\">\r\n        <div class=\"form\">\r\n            <div v-if=\"error\" class=\"error\">{{ message }}</div>\r\n            <form @submit.prevent=\"submit\">\r\n                <input type=\"email\" name=\"email\" id=\"email\" placeholder=\"email\" required/>\r\n                <input type=\"password\" name=\"password\" id=\"password\" placeholder=\"parool\" required/>\r\n                <button type=\"submit\">registeeri</button>\r\n                <p class=\"message\">Kasutaja juba tehtud? <router-link :to=\"{ name: 'login' }\">Logi sisse</router-link></p>\r\n                <div v-if=\"passwordError.length\" class=\"password-error\">\r\n                    <ul>\r\n                        <li v-for=\"(error, index) in passwordError\" :key=\"index\">{{ error }}</li>\r\n                    </ul>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { ref } from 'vue';\r\nimport axios from 'axios';\r\nimport { useRouter } from 'vue-router';\r\n\r\nexport default {\r\n    name: \"register\",\r\n    setup(){\r\n        const router = useRouter();\r\n        const error = ref(false);\r\n        const message = ref(\"\");\r\n        const passwordError = ref([]);\r\n    \r\n        const validatePassword = (password) => {\r\n            passwordError.value = [];\r\n            if (password.length < 8) {\r\n                passwordError.value.push(\"Parool peab olema vähemalt 8 tähemärki pikk!\");\r\n            }\r\n            if (password.length > 64) {\r\n                passwordError.value.push(\"Parool ei tohi olla pikem kui 64 tähemärki!\");\r\n            }\r\n            if (password.includes(\" \")) {\r\n                passwordError.value.push(\"Parool ei tohi sisaldada tühikuid!\");\r\n            }\r\n            if (!/[A-Z]/.test(password)) {\r\n                passwordError.value.push(\"Parool peab sisaldama suurtähte!\");\r\n            }\r\n            if (!/[a-z]/.test(password)) {\r\n                passwordError.value.push(\"Parool peab sisaldama väiketähte!\");\r\n            }\r\n            if (!/[0-9]/.test(password)) {\r\n                passwordError.value.push(\"Parool peab sisaldama numbrit!\");\r\n            }\r\n            return passwordError.value.length === 0;\r\n        };\r\n\r\n        const submit = async e => {\r\n            const form = new FormData(e.target);\r\n            const inputs = Object.fromEntries(form.entries())\r\n            if (!validatePassword(inputs.password)) {\r\n                return;\r\n            }\r\n            try {\r\n                await axios.post(\"/api/user/register\", inputs);\r\n                await router.push({ name: 'login', params: { email: inputs.email, success: true } });\r\n            } catch (err){\r\n                error.value = true\r\n                if (err.response?.status === 409) message.value = \"Kasutaja juba olemas!\";\r\n                else message.value = \"Registreerimise ajal tekkis viga. Palun proovige hiljem.\";\r\n            }\r\n        };\r\n        return {\r\n            submit,\r\n            error,\r\n            message,\r\n            passwordError\r\n        };\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped> \r\n    .login-page {\r\n        max-width: 360px;\r\n        padding: 8% 0 0;\r\n        margin: auto;\r\n    }\r\n    .form {\r\n        position: relative;\r\n        z-index: 1;\r\n        background: #FFFFFF;\r\n        max-width: 360px;\r\n        margin: 0 auto 100px;\r\n        padding: 45px;\r\n        text-align: center;\r\n        box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);\r\n    }\r\n    .form input {\r\n        margin: 0 0 15px;\r\n    }\r\n    .form button {\r\n        border-radius: 4px;\r\n        font-family: \"Roboto\", sans-serif;\r\n        text-transform: uppercase;\r\n        outline: 0;\r\n        background: #2c3e50;\r\n        width: 100%;\r\n        border: 0;\r\n        padding: 15px;\r\n        color: #FFFFFF;\r\n        font-size: 14px;\r\n        -webkit-transition: all 0.3 ease;\r\n        transition: all 0.3 ease;\r\n        cursor: pointer;\r\n    }\r\n    .form button:hover,.form button:active,.form button:focus {\r\n        background: #222f3d;\r\n    }\r\n    .form .message {\r\n        margin: 15px 0 0;\r\n        color: #b3b3b3;\r\n        font-size: 12px;\r\n    }\r\n    .form .message a {\r\n        color: #2c3e50;\r\n        text-decoration: none;\r\n    }\r\n    .password-error {\r\n        color: red;\r\n        font-size: 13px;\r\n        margin-top: 10px;\r\n    }\r\n    .password-error ul {\r\n        list-style: none;\r\n        padding-left: 0;\r\n    }\r\n    .password-error li {\r\n        padding: 5px 0;\r\n    }\r\n    @media (max-width: 360px) {\r\n        .form {\r\n            padding: 45px 30px;\r\n        }\r\n    }\r\n</style>","import { render } from \"./register.vue?vue&type=template&id=1530ba56&scoped=true\"\nimport script from \"./register.vue?vue&type=script&lang=js\"\nexport * from \"./register.vue?vue&type=script&lang=js\"\n\nimport \"./register.vue?vue&type=style&index=0&id=1530ba56&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1530ba56\"]])\n\nexport default __exports__"],"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","$setup","error","_hoisted_3","_toDisplayString","message","_createCommentVNode","onSubmit","_cache","_withModifiers","args","submit","type","name","id","placeholder","required","_hoisted_4","_createTextVNode","_createVNode","_component_router_link","to","default","_withCtx","_","passwordError","length","_hoisted_5","_Fragment","_renderList","index","setup","router","useRouter","ref","validatePassword","password","value","push","includes","test","async","form","FormData","e","target","inputs","Object","fromEntries","entries","axios","post","params","email","success","err","response","status","__exports__","render"],"sourceRoot":""}